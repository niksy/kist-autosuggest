/*! kist-autosuggest 0.2.3 - Simple autosuggest plugin. | Author: Ivan NikoliÄ‡ <niksy5@gmail.com> (http://ivannikolic.com/), 2015 | License: MIT */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self);var c=b;c=c.jQuery||(c.jQuery={}),c=c.fn||(c.fn={}),c.autosuggest=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(c){function d(a,b){return f.extend.apply(null,f.map(b,function(b,c){var d={},e=a[b];return e&&(d[c]=e),d}))}function e(a,b,c){return c?c.replace(new RegExp(b,"i"),'<mark class="'+a+'">$&</mark>'):""}var f="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,g=a(9),h=a(5),i=a(2),j=a(3),k=a(7),l=a(12)(g.name),m=a(4),n=b.exports=function(a,b){this.element=a,this.options=f.extend(!0,{},this.defaults,b),k.setup.call(this),i.setup.call(this),j.setup.call(this),"string"===f.type(this.options.source)&&(this.options.source=f.extend({},this.defaults.source,{url:this.options.source})),this.options.source.url||0===this.$form.length||(this.options.source.url=this.$form.attr("action"))};f.extend(n.prototype,{setCacheData:function(a){this.cacheDataExists(this.getInputVal())||(this.cache[this.getInputVal()]=a)},getCacheData:function(a){return this.cacheDataExists(a)?this.cache[a]:[]},cacheDataExists:function(a){return this.cache.hasOwnProperty(a)},showResults:function(){0!==this.getItems("selectableItems").length&&(this.$results.hasClass(this.options.classes.isOpened)||l(this,"open",[this.$el]),this.$results.attr("aria-expanded",!0).addClass(this.options.classes.isOpened),this.$wrapper.addClass(this.options.classes.isOpened))},hideResults:function(){this.$results.hasClass(this.options.classes.isOpened)&&l(this,"close",[this.$el]),this.$results.attr("aria-expanded",!1).removeClass(this.options.classes.isOpened),this.$wrapper.removeClass(this.options.classes.isOpened)},createGroup:function(a){var b,c=f();return f.each(a,f.proxy(function(a,e){e=d(e,this.options.dataMap),b=f("<div />",{"class":this.options.classes.group}),b.append(f(this.options.templates.groupTitle.call(this.element,e)),this.createList(e.groupItems)).find(this.options.selectors.groupTitle).addClass(this.options.classes.groupTitle),c=c.add(b)},this)),c},createList:function(a){var b=f("<ul />",{"class":this.options.classes.list});return this.createItems(a),b.append(this.getItems("items")),this.setItems("selectableItems",this.getItems("items")),this.setItems("items",f()),b},createItem:function(a,b){a=d(a,this.options.dataMap);var c=f(),i=e(this.options.classes.match,this.getInputVal(),a.value);return i?(c=f("<li />",{id:h.item+"-"+this.uid+"-"+b,"class":this.options.classes.item,role:"option"}),c.data(g.ns.dataAttr+"-data",a).append(f(this.options.templates.item.call(this.element,a))).find(this.options.selectors.toggler).addClass(this.options.classes.toggler),c.find(this.options.selectors.value).addClass(this.options.classes.value).html(i),this.setItems("items",c),c):c},createItems:function(a){f.each(a,f.proxy(function(a,b){return a===this.options.maxItems?!1:void this.createItem(b,a)},this))},getItems:function(a){return this["$"+a]||f()},setItems:function(a,b){return(!this["$"+a]||this["$"+a]&&0===b.length)&&(this["$"+a]=f(),0===b.length)?this["$"+a]:(this["$"+a]=this["$"+a].add(b),this["$"+a])},navigate:function(a){var b=this.getCurrentItem(),c=this.getItems("selectableItems");0!==c.length&&(b=b.length?b:c.filter(m(this.options.classes.isSelected)),0!==b.length?(b=c.eq("down"==a?++this.position:--this.position),(this.position>=c.length||this.position<0)&&(this.position>=c.length?this.position=0:this.position<0&&(this.position=c.length-1),b=c.eq(this.position))):b=c["down"==a?"first":"last"](),l(this,"move",[b,this.getItemData(b)]),this.setCurrentItem(b),this.setInputVal(b.find(this.options.selectors.value).text()))},getItemData:function(a){return a.data(g.ns.dataAttr+"-data")||{}},setCurrentItem:function(a){return this.$currentItem=a,0!==a.length&&(this.$prevItem&&this.$prevItem.removeClass(this.options.classes.isSelected),this.$currentItem.addClass(this.options.classes.isSelected),this.$el.attr("aria-activedescendant",this.$currentItem.attr("id"))),this.$prevItem=this.$currentItem,this.$currentItem},getCurrentItem:function(){return this.$currentItem||f()},setInputVal:function(a,b){this.val=a,b||this.$el.val(a)},getInputVal:function(){return this.val},getData:function(a){var b={},c=this.options.searchQueryProp;return l(this,"search",[a]),this.cacheDataExists(a)?void this.showData(this.getCacheData(a)):(c&&(b[c]=a),this.showPreloader(),void f.ajax(f.extend(!0,{},this.options.source,{data:b})).done(f.proxy(this.showData,this)).always(f.proxy(this.hidePreloader,this)))},showData:function(a){return l(this,"response",[a]),!a||a&&!a.length?void this.hideResults():(this.setCacheData(a),this.cleanup(),this["simple"==this.options.responseType?"createList":"createGroup"](a).appendTo(this.$results),void this.showResults())},showPreloader:function(){this.$preloader.addClass(this.options.classes.isActive)},hidePreloader:function(){this.$preloader.removeClass(this.options.classes.isActive)},cleanup:function(){this.$results.empty(),this.setCurrentItem(f()),this.setItems("selectableItems",f()),this.position=0},destroy:function(){i.destroy.call(this),j.destroy.call(this),k.destroy.call(this)},cache:{},val:"",position:0,defaults:{source:{url:"/",type:"get",dataType:"json"},searchQueryProp:"value",responseType:"simple",minLength:2,maxItems:10,preventSubmit:!0,debounceInputValue:300,dataMap:{url:"value",value:"value",groupName:"groupName",groupItems:"groupItems"},selectors:{toggler:"button, a",value:"button span, a span",groupTitle:"h2"},templates:{item:function(a){var b='button type="button"',c="button";return a.url&&(b='a href="'+a.url+'"',c="a"),"<"+b+"><span>"+a.value+"</span></"+c+">"},groupTitle:function(a){return"<h2>"+a.groupName+" </h2>"}},classes:h,create:f.noop,open:f.noop,close:f.noop,focus:f.noop,blur:f.noop,search:f.noop,response:f.noop,move:f.noop,select:f.noop}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b){(function(c){var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a(9),f=a(5),g=a(12)(e.name);b.exports={$doc:d(document),setup:function(){this.$el=d(this.element),this.$form=this.$el.closest("form"),this.$form=this.$form.length?this.$form:d(),this.$wrapper=d("<div />",{"class":this.options.classes.wrapper}),this.$preloader=d("<div />"),this.$preloader.addClass(this.options.classes.preloader).removeClass(this.options.classes.isActive),this.$wrapper.insertBefore(this.$el).append(this.$el,this.$preloader),this.$results=d("<div />"),this.$results.attr({id:f.results+"-"+this.uid,role:"listbox","aria-expanded":!1}).addClass(this.options.classes.results).removeClass(this.options.classes.isOpened).appendTo(this.$wrapper),this.$el.addClass(this.options.classes.input).attr({role:"combobox","aria-autocomplete":"list","aria-owns":f.results+"-"+this.uid,"aria-activedescendant":"",autocomplete:"off",autocorrect:"off"}),g(this,"create",[this.$el])},destroy:function(){this.$el.removeClass(this.options.classes.input).removeAttr("role aria-autocomplete aria-owns aria-activedescendant autocomplete autocorrect").insertBefore(this.$wrapper),this.$wrapper.remove()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b){(function(c){function d(){m(this,"select",[this.getCurrentItem(),this.getItemData(this.getCurrentItem())]),this.hideResults()}function e(a,b){var c=b.which,d=this.$el.val();return this.setInputVal(d,!0),-1!==i.inArray(c,r)||this.getInputVal().length<this.options.minLength?void(-1===i.inArray(c,q)&&this.hideResults()):void a.call(this,this.getInputVal())}function f(a){var b=a.which,c=i(a.target);(b===p.escape&&c.is(this.$el)||b>=p.mouseLeft&&b<=p.mouseRight&&0===c.closest(this.$results).length&&!c.is(this.$el))&&this.hideResults()}function g(a){var b=a.which;switch(b){case p.up:case p.down:this.$results.hasClass(this.options.classes.isOpened)||this.showResults(),this.navigate(b===p.down?"down":"up");break;case p.enter:d.call(this)}}function h(a){var b=i(a.target).closest(o(this.options.classes.item));this.setCurrentItem(b),this.setInputVal(b.find(this.options.selectors.value).text()),d.call(this),this.options.preventSubmit||this.$form.trigger("submit")}var i="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,j=a(2),k=a(8),l=a(9),m=a(12)(l.name),n=a(15).debounce,o=a(4),p=k.KEY,q=k.WHITELIST,r=k.BLACKLIST;b.exports={setup:function(){this.$el.on("keyup"+this.ens,n(this.options.debounceInputValue,i.proxy(e,this,this.getData))).on("keyup"+this.ens,i.proxy(function(a){-1===i.inArray(a.which,r)&&m(this,"input",[this.$el.val()])},this)).on("keydown"+this.ens,i.proxy(g,this)).on("focus"+this.ens,i.proxy(this.showResults,this)).on("focus"+this.ens,i.proxy(function(){m(this,"focus",[this.$el])},this)).on("blur"+this.ens,i.proxy(function(){m(this,"blur",[this.$el])},this)),this.$wrapper.on("click"+this.ens,o(this.options.classes.toggler),i.proxy(h,this)),j.$doc.on("click"+this.ens,i.proxy(f,this)).on("keydown"+this.ens,i.proxy(f,this)),this.options.preventSubmit&&this.$form.on("submit"+this.ens,function(a){a.preventDefault()})},destroy:function(){j.$doc.off(this.ens),this.$el.off(this.ens),this.$wrapper.off(this.ens),this.$form.off(this.ens)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b){b.exports=function(a){return"."+a.split(" ").join(".")}},{}],5:[function(a,b){var c=a(9);b.exports={wrapper:c.ns.htmlClass,results:c.ns.htmlClass+"-results",input:c.ns.htmlClass+"-input",list:c.ns.htmlClass+"-list",item:c.ns.htmlClass+"-item",toggler:c.ns.htmlClass+"-toggler",value:c.ns.htmlClass+"-value",match:c.ns.htmlClass+"-match",preloader:c.ns.htmlClass+"-preloader",group:c.ns.htmlClass+"-group",groupTitle:c.ns.htmlClass+"-groupTitle",isSelected:"is-selected",isOpened:"is-opened",isActive:"is-active"}},{}],6:[function(a,b){(function(c){var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a(1),f=a(9),g=a(13)(f.publicMethods),h=a(10)(e.prototype.defaults.classes),i=a(11)(e.prototype.defaults.classes,f.ns.htmlClass),j=b.exports=function(a){return a=a||{},this.each(function(){var b=d.data(this,f.name);g(a)&&b?b[a]():"object"!=typeof a||b||d.data(this,f.name,new e(this,a))})};j.defaults=e.prototype.defaults,j.appendClass=h,j.appendNamespacedClasses=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b){(function(c){var d="undefined"!=typeof window?window.$:"undefined"!=typeof c?c.$:null,e=a(9),f=0;b.exports={setup:function(){this.uid=f++,this.ens=e.ns.event+"."+this.uid},destroy:function(){d.removeData(this.element,e.name)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b){var c={enter:13,escape:27,up:38,down:40,mouseLeft:1,mouseRight:3},d=[16,17,18,20,37,c.up,39,c.down,91,93],e=[9,c.enter,c.escape].concat(d);b.exports={KEY:c,BLACKLIST:e,WHITELIST:d}},{}],9:[function(a,b){b.exports={name:"autosuggest",ns:{htmlClass:"kist-Autosuggest",event:".kist.autosuggest",dataAttr:"kist-autosuggest"},publicMethods:["destroy"]}},{}],10:[function(a,b){(function(a){"undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=function(a){return function(b,c){return[a[b],c].join(" ")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(a,b){(function(a){var c="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=function(a,b){return function(d){return c.extend.apply(null,c.map(a,function(a,e){var f={};return f[e]=c.trim([a,-1!==a.indexOf(b)?a.replace(b,d):""].join(" ")),f}))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(a,b){(function(a){var c="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=function(a){return function(b,d,e,f){var g=b.dom&&b.dom.el||b.$el||c({});b.options[d]&&b.options[d].apply(1===g.length?g[0]:g.toArray(),e),(f||g).trigger(((a||"")+d).toLowerCase(),e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(a,b){(function(a){var c="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=function(a){return function(b){return"string"==typeof b&&-1!==c.inArray(b,a||[])}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(a,b){var c=a(16);b.exports=function(a,b,d){return void 0===d?c(a,b,!1):c(a,d,b!==!1)}},{}],15:[function(a,b){b.exports={throttle:a(16),debounce:a(14)}},{}],16:[function(a,b){(function(a){var c="undefined"!=typeof window?window.$:"undefined"!=typeof a?a.$:null;b.exports=function(a,b,d,e){function f(){function c(){h=Number(new Date),d.apply(i,k)}function f(){g=void 0}var i=this,j=Number(new Date)-h,k=arguments;e&&!g&&c(),g&&clearTimeout(g),void 0===e&&j>a?c():b!==!0&&(g=setTimeout(e?f:c,void 0===e?a-j:a))}var g,h=0;return"boolean"!=typeof b&&(e=d,d=b,b=void 0),c&&c.guid&&(f.guid=d.guid=d.guid||c.guid++),f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[6])(6)});